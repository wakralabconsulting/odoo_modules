<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
	
	<t t-inherit="point_of_sale.Orderline" t-inherit-mode="extension">
	    <xpath expr="//div[hasclass('justify-content-between')]" position="replace">
		     <div class="d-flex justify-content-between">
                <div class="product-name d-inline-block flex-grow-1 fw-bolder pe-1 text-truncate">
                    <span class="text-wrap" t-esc="line.productName"/>
                    <t t-slot="product-name"/>
                </div>
			     <t t-if="!line.internalNote">
                <div class="product-price d-inline-block text-end price fw-bolder">
                    <t t-esc="line.price"/>
                </div>
			     </t>
			     <t t-if="!line.comboParent">
			     <div class="product-price d-inline-block text-end price fw-bolder">
	                 <t t-esc="line.internalNote" /> <t t-esc="line.unit" />
                </div>
			     </t>
            </div>
	    </xpath>
		
		<xpath expr="//ul[hasclass('info-list')]" position="replace">
		      <ul class="info-list ms-2">
                <li class="price-per-unit">
                    <em t-esc="line.qty" class="qty fst-normal fw-bolder me-1" /> <t t-if="line.unit" t-esc="line.unit" />
                    <t t-if="! line.comboParent">
	                <t t-if="line.price !== 0">
                        x <s t-esc="line.oldUnitPrice" t-if="line.oldUnitPrice" />
                        <t t-esc="line.unitPrice" /> <span t-if="line.unit"> / <t t-esc="line.unit" /></span>
                    </t>
                    </t>
                </li>
                <li t-if="line.price !== 0 and line.discount and line.discount !== '0'">
                    <t t-esc="line.price_without_discount"/> With a <em><t t-esc="line.discount" />% </em> discount
                </li>
                <t t-slot="default" />
                <li t-if="line.customerNote" class="customer-note w-100 p-2 my-1 rounded text-break text-bg-warning text-warning bg-opacity-25">
                    <i class="fa fa-sticky-note me-1" role="img" aria-label="Customer Note" title="Customer Note"/>
                    <t t-esc="line.customerNote" />
                </li>
<!--                 <li t-if="line.internalNote" class="internal-note w-100 p-2 my-1 rounded text-bg-info text-info bg-opacity-25 text-break"> -->
<!--                     <i class="fa fa-tag me-1" role="img" aria-label="Note" title="Note"/> -->
<!--                     <t t-esc="line.internalNote" /> -->
<!--                 </li> -->
                <li t-if="line.attributes">
                    <div t-foreach="line.attributes" t-as="attribute" t-key="attribute.id">
                        <t t-esc="attribute.name"/>:
                        <t t-foreach="attribute.valuesForOrderLine" t-as="value" t-key="value.id">
                            <t t-if="value_index !== 0" t-esc="' | '"/>
                            <t t-esc="value.name"/>
                            <t t-if="value.price_extra">
                                (<t t-esc='env.utils.formatCurrency(value.price_extra)'/>)
                            </t>

                        </t><br/>
                    </div>
                </li>
            </ul>
	    </xpath>
	</t>
	
	
	
	<t t-inherit="point_of_sale.TicketScreen" t-inherit-mode="extension">
	    <xpath expr="//div[hasclass('orders')]" position="replace">
                                              <div class="orders overflow-y-auto flex-grow-1">
                        <t t-set="_filteredOrderList" t-value="getFilteredOrderList()" />
	                                              <t t-if="_filteredOrderList.length !== 0">
                            <div class="header-row d-flex text-bg-700 fw-bolder" t-att-class="{ 'd-none': ui.isSmall }">
                                <div class="col wide p-2">Date</div>
	                            <div class="col wide p-2">Receipt Number</div>
	                            <div class="col wide p-2">Order number</div>
	                            <div class="col p-2">Customer</div>
	                            <div class="col p-2">Customer Reference</div>
	                            <div class="col wide p-2" t-if="showCardholderName()">Cardholder Name</div>
	                            <div class="col p-2">Cashier</div>
	                            <div class="col end p-2">Total</div>
	                            <div class="col narrow p-2">Status</div>
	                            <div class="col very-narrow p-2" name="delete"></div>
                            </div>
		                                              <t t-if="!ui.isSmall" t-foreach="_filteredOrderList" t-as="order" t-key="order.cid">
                                <div class="order-row" t-att-class="{ 'highlight bg-primary text-white': isHighlighted(order) }"
                                     t-on-click="() => this.onClickOrder(order)" t-on-dblclick="() => order.locked ? ()=>{} : this._setOrder(order)" >
                                    <div class="col wide p-2 ">
                                        <div><t t-esc="getDate(order)"></t></div>
                                    </div>
	                                <div class="col wide p-2">
                                        <div><t t-esc="order.name"></t></div>
                                    </div>
	                                <div class="col wide p-2">
                                        <div><t t-esc="order.trackingNumber"></t></div>
                                    </div>
	                                <div class="col p-2">
                                        <div><t t-esc="getPartner(order)"></t></div>
                                    </div>
	                                <div class="col wide p-2">
                                        <div><t t-esc="order.custom_note"></t></div>
                                    </div>
	                                <div t-if="showCardholderName()" class="col p-2">
                                        <div><t t-esc="getCardholderName(order)"></t></div>
                                    </div>
	                                <div class="col p-2">
                                        <t t-esc="getCashier(order)"></t>
                                    </div>
	                                <div class="col end p-2">
                                        <div><t t-esc="getTotal(order)"></t></div>
                                    </div>
	                                <div class="col narrow p-2">
                                        <div><t t-esc="getStatus(order)"></t></div>
                                    </div>
	                                <div t-if="!shouldHideDeleteButton(order)" class="col very-narrow delete-button p-2" name="delete" t-on-click.stop="() => this.onDeleteOrder(order)">
                                        <i class="fa fa-trash" aria-hidden="true"/>
                                    </div>
	                                <div t-else="" class="col very-narrow p-2"></div>
                                </div>
                            </t>
		                                              <t t-if="ui.isSmall" t-foreach="_filteredOrderList" t-as="order" t-key="order.cid">
                                <div class="mobileOrderList order-row" t-att-class="{ 'highlight bg-primary text-white': isHighlighted(order) }"
                                     t-on-click="() => this.onClickOrder(order)" t-on-dblclick="() =>  order.locked ? ()=>{} : this._setOrder(order)" >
                                    <div class="col p-2 d-flex justify-content-between align-items-center">
                                        <div><t t-esc="order.name"></t> / <t t-esc="order.trackingNumber"></t></div>
	                                    <div><t t-esc="getTotal(order)"></t></div>
                                    </div>
	                                <div class="col p-2 d-flex justify-content-between align-items-center">
                                        <div><t t-esc="getDate(order)"></t></div>
		                                <div class="orderStatus"><t t-esc="getStatus(order)"></t></div>
                                    </div>
	                                <div class="col p-2">
                                        <div t-if="!shouldHideDeleteButton(order)" class="col very-narrow delete-button p-2 rounded-2" name="delete" t-on-click.stop="() => this.onDeleteOrder(order)">
                                            <i class="fa fa-trash" aria-hidden="true"/> Delete
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </t>
	                                              <CenteredIcon t-else="" icon="'fa-shopping-cart fa-4x'" text="'No orders found'"/>
                    </div>


        </xpath>
    </t>

</templates>

